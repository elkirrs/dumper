import{_ as l}from"./YamlViewer-fQxhEIC2.js";import{_ as n}from"./List-Dl8inmOz.js";import{_ as p}from"./Chip-Bi7_OurC.js";import{_ as u,c as d,a as t,b as r,w as f,F as c,o as m,d as y}from"./index-1qoy4L8L.js";import{V as g}from"./VAlert-LeGdv3CL.js";import"./VSlideGroup-DfHSb1tV.js";const k={data(){return{typeKey:["settings"],snackbar:!1,configKeys:[{key:"db_port",value:"Default database connection port",type:"integer",required:!1,info:{text:"",link:""}},{key:"driver",value:"Default database driver",type:"string",required:!1,info:{text:'Type: "aes"',link:""}},{key:"ssh",value:"Connect to ssh",type:"object",required:!1,info:{text:"",link:""},sub:[{key:"private_key",value:"The path to the private SSH key",type:"string",required:!1,info:{text:"",link:""}},{key:"passphrase",value:"Passphrase for the key",type:"string",required:!1,info:{text:"",link:""}},{key:"is_passphrase",value:"Whether to use passphrase from the config",type:"boolean",required:!1,info:{text:"",link:""}}]},{key:"template",value:"Template for name dump",type:"string",required:!1,info:{text:"",link:"#/template"}},{key:"dir_remote",value:"Dir remote for dumps",type:"string",required:!1,info:{text:"",link:""}},{key:"archive",value:"Archive dump file",type:"string",required:!1,info:{text:"",link:""}},{key:"location",value:"Dump execution methode",type:"string",required:!1,info:{text:'Type: "server", default: "server"',link:""}},{key:"format",value:"Default dump format",type:"string",required:!1,info:{text:"",link:""}},{key:"dir_dump",value:"Directory for saving dumps",type:"string",required:!1,info:{text:"",link:""}},{key:"dir_archived",value:"Directory for moving old dumps",type:"string",required:!1,info:{text:"need {%srv%}_{%db%} in template",link:""}},{key:"logging",value:"Create log file",type:"string",required:!1,info:{text:"",link:""}},{key:"retry_connect",value:"Attempts reconnect to server (default 5)",type:"integer",required:!1,info:{text:"default: 5",link:""}},{key:"remove_dump",value:"Remove dump file after created",type:"boolean",required:!1,info:{text:"default: true",link:""}},{key:"storages",value:"Default list storages",type:"array",required:!1,info:{text:"",link:"#/storages/local"}},{key:"parallel_download",value:"Parallel upload dump file for several storages",type:"integer",required:!1,info:{text:" default: 2",link:""}},{key:"encrypt",value:"Default encryption for all databases",type:"object",required:!1,info:{text:"",link:"#/crypt/database"}},{key:"shell",value:"Default shell script for all databases",type:"object",required:!1,info:{text:"",link:"#/shell"}},{key:"docker",value:"Default docker command for all databases",type:"object",required:!1,info:{text:"",link:"#/docker"}}],yamlConfig:[]}},computed:{configBase(){return{db_port:"5432",server_port:"22",driver:"psql",ssh:{private_key:"/User/.ssh/id_rsa",passphrase:"123456",is_passphrase:!0},password:"123456",dir_remote:"/root/dump/",template:"{%srv%}_{%db%}_{%datetime%}",archive:!0,location:"server",format:"plain",dir_dump:"./dumps",dir_archived:"./old",logging:!0,retry_connect:5,remove_dump:!0,parallel_download:1}}},mounted(){this.yamlConfig=[{title:"settings",value:{settings:{...this.configBase}}},{title:"storages",value:{settings:{...this.configBase,storages:["sftp","azure"]}}},{title:"shell",value:{settings:{...this.configBase,shell:{enable:!0,after:'echo "run script before create dump',before:'echo "run script after create dump'}}}},{title:"encrypt",value:{settings:{...this.configBase,encrypt:{enable:!0,type:"aes",password:"123456a"}}}},{title:"docker",value:{settings:{...this.configBase,docker:{enable:!0,command:"docker compose --file /var/www/docker-compose.yaml exec -T postgres"}}}},{title:"all",value:{settings:{...this.configBase,storages:["sftp","azure"],shell:{enable:!0,after:'echo "run script before create dump',before:'echo "run script after create dump'},encrypt:{enable:!0,type:"aes",password:"123456a"},docker:{enable:!0,command:"docker compose --file /var/www/docker-compose.yaml exec -T postgres"}}}}]}},v={class:"pb-5"},_={class:"pb-5"},h={class:"pb-5"};function b(x,e,q,w,s,D){const a=p,o=n,i=l;return m(),d(c,null,[e[2]||(e[2]=t("div",{class:"pb-5"},[t("h2",null,"Settings")],-1)),t("div",v,[r(g,{border:"start",variant:"text",density:"compact"},{default:f(()=>[...e[0]||(e[0]=[y(" Set global config for each database. If global settings are not needed for one of the databases, you need to disable them in this database or not set them in global settings. ",-1)])]),_:1})]),t("div",_,[e[1]||(e[1]=t("h2",null,"Config keys",-1)),r(a,{items:s.typeKey},null,8,["items"]),r(o,{items:s.configKeys},null,8,["items"])]),t("div",h,[r(i,{configObject:s.yamlConfig},null,8,["configObject"])])],64)}const S=u(k,[["render",b]]);export{S as default};

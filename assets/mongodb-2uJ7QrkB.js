import{_ as l}from"./RestoreDatabase-BvNc5gqq.js";import{_ as c}from"./YamlViewer-CyaCBeEQ.js";import{_ as p}from"./List-CzjS5ryG.js";import{_ as m}from"./Chip-CJsUel5s.js";import{_ as b,c as f,a as e,t as o,b as s,w as y,F as v,o as _,d as i}from"./index-CuCy4DLw.js";import{V as g}from"./VAlert-DNgrSmkw.js";import"./VSlideGroup-CpROUN5z.js";const h={components:{RestoreDatabase:l},data(){return{driver:"mongo",database:"MongoDB",utility:["mongodump"],snackbar:!1,configKeys:[{key:"title",value:"Human-readable database name",type:"string",required:!1,info:{text:"",link:""}},{key:"name",value:"Database name (by default, the key name)",type:"string",required:!0,info:{text:"",link:""}},{key:"user",value:"Database username",type:"string",required:!0,info:{text:"",link:""}},{key:"password",value:"Database user's password",type:"string",required:!0,info:{text:"",link:""}},{key:"server",value:"The link to the server from the servers section list",type:"string",required:!0,info:{text:"",link:""}},{key:"port",value:"Database connection port",type:"integer",required:!0,info:{text:"",link:""}},{key:"driver",value:"Driver database",type:"string",required:!0,info:{text:"",link:""}},{key:"format",value:"Database dump format",type:"string",required:!0,info:{text:'Format list: "bson", "archive"',link:""}},{key:"archive",value:"Archiving a backup file",type:"boolean",required:!1,info:{text:"",link:""}},{key:"remove_dump",value:"Remove dump file after created (default true)",type:"boolean",required:!1,info:{text:"",link:""}},{key:"storages",value:"Storage list when the dump need to upload",type:"array",required:!0,info:{text:"(Not required if storage set up in global setting)",link:""}},{key:"options",value:"Additional options for the database",type:"object",required:!1,info:{text:"",link:""},sub:[{key:"auth_source",value:"Auth source",type:"string",required:!1},{key:"ssl",value:"SSL/TLS",type:"bool",required:!1},{key:"source",value:"Full path to dump util",type:"string",required:!1},{key:"inc_tables",value:"Create a table dump include only tables from this list.",type:"array",required:!1},{key:"exc_tables",value:"Create a table dump, excluding tables from this list",type:"array",required:!1}]},{key:"encrypt",value:"Encrypt database",type:"object",required:!1,info:{text:"",link:"#/crypt/database"}},{key:"shell",value:"Run shell scrypt",type:"object",required:!1,info:{text:"",link:"#/shell"}},{key:"docker",value:"Create dump in docker",type:"object",required:!1,info:{text:"",link:"#/docker"}},{key:"dir_remote",value:"Dir remote for dumps",type:"string",required:!1,info:{text:'default value from global settings (if the default value is not set, then "./" is used.)',link:""}}],yamlConfig:[],restoreDatabase:[{title:"Use this command to restore database:",value:"$ mongorestore --db=my_db /backup/my_db"},{title:"If the dump has created with archive mode:",value:"$ mongorestore --archive=backup.archive"}]}},computed:{configBase(){return{title:"My DB MongoDB",name:"mydb",user:"myuser",password:"mypassword",port:3306,driver:this.driver,server:"srv-mongo-db",format:"bson",storages:["sftp","local"],remove_dump:!0}}},mounted(){this.yamlConfig=[{title:"Default",value:{databases:{mongo_db:{...this.configBase}}}},{title:"options",value:{databases:{mongo_db:{...this.configBase,options:{auth_source:"admin",ssl:!0}}}}},{title:"archive",value:{databases:{mongo_db:{...this.configBase,archive:!0}}}},{title:"docker",value:{databases:{mongo_db:{...this.configBase,docker:{enabled:!0,command:"docker compose --file /var/www/docker-compose.yaml exec -T mysql"}}}}},{title:"shell",value:{databases:{mongo_db:{...this.configBase,shell:{enabled:!0,after:'echo "run script before create dump',before:'echo "run script after create dump'}}}}},{title:"encrypt",value:{databases:{mongo_db:{...this.configBase,encrypt:{enabled:!0,type:"aes",password:"123456"}}}}},{title:"include table",value:{databases:{mongo_db:{...this.configBase,options:{inc_table:["table_1","table_2"]}}}}},{title:"exclude table",value:{databases:{mongo_db:{...this.configBase,options:{exc_table:["table_1","table_2"]}}}}},{title:"All",value:{databases:{mongo_db:{...this.configBase,archive:!0,options:{auth_source:"admin",ssl:!0},docker:{enabled:!0,command:"docker compose --file /var/www/docker-compose.yaml exec -T mysql"},shell:{enabled:!0,after:'echo "run script before create dump',before:'echo "run script after create dump'},encrypt:{enabled:!0,type:"aes",password:"123456"}}}}},{title:"disabled",value:{databases:{mongo_db:{...this.configBase,archive:!1,docker:{enabled:!1},shell:{enabled:!1},encrypt:{enabled:!1}}}}}]}},k={class:"pb-5"},x={class:"pb-5"},q={class:"pb-5"},w={class:"pb-5"},B={class:"pb-5"};function D(C,t,T,j,a,V){const r=m,n=p,u=c,d=l;return _(),f(v,null,[e("div",k,[e("h2",null,o(a.database),1)]),e("div",x,[s(g,{border:"start",variant:"text",density:"compact"},{default:y(()=>[e("p",null,[t[0]||(t[0]=i(" Dumper uses ",-1)),s(r,{items:a.utility},null,8,["items"]),i(" utility to backup "+o(a.database)+" database. ",1)]),t[1]||(t[1]=e("p",null,"The first step is to install the utility to create a database dump for your env.",-1)),t[2]||(t[2]=e("p",null,"The final backup file will always be archived.",-1))]),_:1})]),e("div",q,[t[3]||(t[3]=e("h2",null,"Config keys",-1)),s(r,{items:["driver: "+a.driver]},null,8,["items"]),s(n,{items:a.configKeys},null,8,["items"])]),e("div",w,[s(u,{configObject:a.yamlConfig},null,8,["configObject"])]),e("div",B,[s(d,{items:a.restoreDatabase},null,8,["items"])])],64)}const E=b(h,[["render",D]]);export{E as default};
